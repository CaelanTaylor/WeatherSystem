<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>24 Hour Wind Trend - WindScout</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <h1 >WindScout</h1 >
        </div >
        <div class="navitems">
            <ul >
                <li ><a href="index.html">LiveWeather</a ></li >
                <li ><a href="10mtrend.html">10 Minute Trend</a ></li >
                <li ><a href="1htrend.html">1 Hour Trend</a ></li >
                <li ><a href="analysis.html">Analysis</a ></li >
                <li ><a href="settings.html">Settings</a></li >
                <li class="active"><a href="24htrend.html">24 Hour Trend</a></li >
            </ul >
        </div >
    </div >
    <div class="content">
        <div class="title">
            <h1 >24 Hour Wind Trend</h1 >
            <div class="line"></div >
        </div >
        <div id="trend-display">
            <canvas id="windChart" width="800" height="400"></canvas>
        </div >
    </div >

    <script>
        function fetchAndDisplayTrend() {
            fetch('http://192.168.192.186:5001/trend24h')
                .then(response => response.json())
                .then(data => {
                    // Process the data
                    const labels = data.map(item => item.time);
                    const avgWindData = data.map(item => item.avg_wind);
                    const maxGustData = data.map(item => item.max_gust);

                    // Create the chart
                    const ctx = document.getElementById('windChart').getContext('2d');
                    const windChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [
                                {
                                    label: 'Average Wind Speed',
                                    data: avgWindData,
                                    borderColor: 'blue',
                                    fill: false
                                },
                                {
                                    label: 'Max Gust',
                                    data: maxGustData,
                                    borderColor: 'red',
                                    fill: false
                                }
                            ]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                })
                .catch(error => {
                    console.error("Error fetching 24-hour trend data:", error);
                    document.getElementById('trend-display').innerHTML = "<p>Error loading data.</p>";
                });
        }

        fetchAndDisplayTrend();
    </script>
</body>
</html>